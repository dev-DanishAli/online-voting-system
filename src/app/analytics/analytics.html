<div class="analytics-container">

  <!-- Header -->
  <div class="header">
    <h1>Analytics</h1>
    <p class="election-title">{{ electionTitle }}</p>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">
    Loading analytics...
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error">
    {{ error }}
  </div>

  <!-- Position-wise Analytics -->
  <div class="cards" *ngIf="!loading && !error">

    <div class="position-card" *ngFor="let key of getPositionKeys()">
      <h3>{{ analyticsData[key][0]?.position_name }}</h3>

      <div class="candidate" *ngFor="let c of analyticsData[key]">
        <span class="name">{{ c.candidate_name }}</span>
        <span class="votes">{{ c.vote_count }} votes</span>
      </div>
    </div>

  </div>

  <!-- Winners Section -->
  <div class="winners-section" *ngIf="winners.length > 0">

    <h2>Top Candidates</h2>

    <div class="winner-card" *ngFor="let w of winners">
      <span class="position">{{ w.position }}</span>
      <span class="candidate">{{ w.candidate }}</span>
      <span class="votes">{{ w.votes }} votes</span>
    </div>

  </div>

</div>
